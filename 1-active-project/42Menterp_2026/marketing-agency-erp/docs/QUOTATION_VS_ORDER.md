# 견적서 vs 주문 - 차이와 관계

## 📋 기본 개념

### 견적서 (Quotation)
- **목적**: 고객에게 서비스/상품 가격을 제안하는 문서
- **상태**: 아직 확정되지 않은 예상 가격
- **생명주기**: 
  1. 초안 (draft)
  2. 발송 (sent)
  3. 수락 (accepted) ← 이 상태에서만 주문으로 전환 가능
  4. 거절 (rejected)
  5. 만료 (expired)

### 주문 (Order)
- **목적**: 실제로 확정된 거래
- **상태**: 확정된 주문, 실제 작업 진행
- **생명주기**:
  1. 대기중 (pending)
  2. 진행중 (in_progress)
  3. 완료 (completed)
  4. 취소 (cancelled)

## 🔄 관계와 프로세스

### 프로세스 1: 견적서 → 주문 (일반적인 프로세스)

```
1. 견적서 생성
   ↓
2. 고객에게 견적서 발송
   ↓
3. 고객이 견적서 수락
   ↓
4. 견적서를 주문으로 전환 ✅
   ↓
5. 주문 진행 및 정산
```

### 프로세스 2: 주문 → 견적서 (새로운 프로세스)

```
1. 주문 먼저 생성 ✅
   ↓
2. 주문에서 견적서 생성 ✅
   ↓
3. 고객에게 견적서 발송
   ↓
4. 주문 진행 및 정산
```

### 프로세스 3: 직접 주문 생성

```
1. 견적서 없이 직접 주문 생성 ✅
   ↓
2. 주문 진행 및 정산
```

### 프로세스 4: 독립 견적서 생성

```
1. 견적서만 독립적으로 생성 ✅
   ↓
2. 필요시 나중에 주문으로 전환
```

## 💡 차이점 요약

| 항목 | 견적서 | 주문 |
|------|--------|------|
| **성격** | 제안서 | 확정 거래 |
| **상태** | draft, sent, accepted, rejected, expired | pending, in_progress, completed, cancelled |
| **결제** | 없음 | 있음 (paidAmount, unpaidAmount) |
| **작업 진행** | 없음 | 있음 |
| **정산** | 포함 안됨 | 정산 대상 |
| **전환** | → 주문으로 전환 가능 | 견적서에서 생성됨 (또는 직접 생성) |

## 🎯 사용 시나리오

### 시나리오 1: 견적서 → 주문 (일반적인 프로세스)
1. 고객 상담 후 견적서 작성
2. 견적서를 고객에게 발송
3. 고객이 수락하면 "주문으로 전환" 버튼 클릭
4. 자동으로 주문 생성 (견적서 데이터 복사)
5. 주문 진행

### 시나리오 2: 직접 주문 생성 (빠른 주문)
1. 고객이 바로 주문하는 경우
2. 견적서 없이 직접 주문 생성
3. 주문 진행

## 🔧 현재 구현 상태

### ✅ 구현된 기능
- 견적서 독립 생성
- 주문 독립 생성
- 견적서 → 주문 전환 기능 (`/api/quotations/[id]/convert`)
- 주문 → 견적서 생성 기능 (`/api/orders/[id]/quotation`) ⭐ 새로 추가
- 견적서와 주문 양방향 연결

### 📝 참고사항
- 견적서는 "제안" 단계
- 주문은 "확정" 단계
- 견적서 없이도 주문 생성 가능
- 주문에서 견적서 생성 가능 (고객 제안용)
- 견적서에서 주문 전환 가능 (확정 단계)
- 양방향 변환이 모두 가능하지만, 한 번 연결되면 중복 생성 불가

