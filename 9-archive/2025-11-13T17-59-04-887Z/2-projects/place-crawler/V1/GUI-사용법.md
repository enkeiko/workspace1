# 🖥️ GUI 프로그램 사용법

## 🚀 시작하기

### 1. 서버 실행

```bash
node gui-server.js
```

서버가 시작되면 다음과 같은 메시지가 표시됩니다:

```
============================================================
🖥️  네이버 플레이스 수집기 GUI 서버
============================================================

🌐 서버 주소: http://localhost:3000

💡 사용 방법:
   1. 브라우저에서 위 주소를 열어주세요
   2. 플레이스 ID를 입력하세요
   3. 수집 버튼을 클릭하세요

⚠️  서버를 종료하려면 Ctrl+C를 누르세요
```

### 2. 웹 브라우저 열기

브라우저에서 다음 주소를 열어주세요:

**http://localhost:3000**

## 📝 기능 설명

### 🔹 단일 수집 모드

1개의 플레이스 정보를 빠르게 수집합니다.

**사용법**:
1. "단일 수집" 탭 선택
2. 플레이스 ID 입력 (예: 1768171911)
3. "🔍 수집하기" 버튼 클릭 또는 Enter 키
4. 결과 확인

### 🔹 배치 수집 모드

여러 플레이스를 한 번에 수집합니다.

**사용법 1 - 하나씩 추가**:
1. "배치 수집" 탭 선택
2. 플레이스 ID 입력
3. "➕ 추가" 버튼 클릭 또는 Enter 키
4. 반복하여 여러 ID 추가
5. "🚀 전체 수집 시작" 버튼 클릭

**사용법 2 - 여러 개 한 번에 추가**:
1. "배치 수집" 탭 선택
2. 텍스트 박스에 여러 ID 입력 (줄바꿈으로 구분)
   ```
   1768171911
   1234567890
   0987654321
   ```
3. "📝 일괄 추가" 버튼 클릭
4. "🚀 전체 수집 시작" 버튼 클릭

## 🎨 인터페이스 구성

### 상단
- **탭**: 단일 수집 / 배치 수집 전환

### 입력 영역
- **플레이스 ID 입력란**: ID를 입력하는 곳
- **도움말**: 플레이스 ID 찾는 방법 안내

### 배치 수집 - 추가 기능
- **ID 칩**: 추가된 ID들을 보여주는 태그
- **× 버튼**: 개별 ID 삭제
- **🗑️ 목록 지우기**: 전체 삭제

### 상태 영역
- **진행 상황**: 실시간 로그 표시
- **스피너**: 수집 진행 중 표시

### 결과 영역
- **카드 형식**: 수집된 플레이스 정보 표시
- **네이버 플레이스 링크**: 원본 페이지로 이동

## 📍 플레이스 ID 찾는 방법

### 방법 1: URL에서 확인

네이버 지도나 플레이스에서 식당을 검색한 후 URL을 확인:

```
https://map.naver.com/p/entry/place/1768171911
                                    ^^^^^^^^^^
                                    이 부분이 ID
```

### 방법 2: 모바일 URL

```
https://m.place.naver.com/restaurant/1768171911/home
                                      ^^^^^^^^^^
                                      이 부분이 ID
```

### 예시
- **히도 (돈가스)**: 1768171911
- URL 마지막 숫자 부분을 복사하면 됩니다

## ⚙️ 설정

### 수집 간격 조정

`gui-server.js` 파일에서 수정:

```javascript
// 기본값: 5초
await page.waitForTimeout(3000); // 3초로 변경
```

### 저장 폴더 변경

```javascript
const outputDir = './my-places'; // 원하는 폴더명
```

## 📁 결과 파일

수집된 데이터는 `places/` 폴더에 저장됩니다:

```
places/
├── place-1768171911.json
├── place-1234567890.json
└── place-0987654321.json
```

### JSON 파일 구조

```json
{
  "id": "1768171911",
  "name": "히도",
  "category": "돈가스",
  "roadAddress": "경남 창원시 마산회원구 산호천동길 226 1층",
  "phone": "정보 없음",
  "rating": 0,
  "reviewCount": 707,
  "menus": [...],
  "url": "https://map.naver.com/p/entry/place/1768171911",
  "collectedAt": "2025-10-21T12:00:00.000Z"
}
```

## 🔍 결과 확인

### 화면에서 확인
- 수집이 완료되면 카드 형식으로 화면에 표시됩니다
- 식당명, 카테고리, 주소, 전화번호, 평점, 메뉴 개수 등

### 파일로 확인
- `places/` 폴더의 JSON 파일 열기
- 텍스트 에디터나 JSON 뷰어 사용

## 🚨 문제 해결

### 봇 탐지

**증상**: "봇 탐지됨. 브라우저에서 새로고침해주세요." 메시지

**해결**:
1. Playwright 브라우저 창 확인
2. 수동으로 새로고침 버튼 클릭
3. CAPTCHA가 나오면 풀기
4. 프로그램이 자동으로 계속 진행됨

### 서버 연결 실패

**증상**: "서버가 실행 중인지 확인해주세요."

**해결**:
1. 터미널에서 `node gui-server.js` 실행 여부 확인
2. 포트 3000이 사용 중인지 확인
3. 방화벽 설정 확인

### 데이터를 찾을 수 없음

**증상**: "APOLLO_STATE를 찾을 수 없습니다."

**해결**:
1. 올바른 플레이스 ID인지 확인
2. 네이버가 페이지 구조를 변경했을 수 있음
3. 수동으로 네이버 플레이스에서 ID 재확인

## 💡 팁

### 효율적인 수집

1. **소량 (1-10개)**: 단일 수집 모드 사용
2. **대량 (10개+)**: 배치 수집 모드 사용
3. **매우 많음 (100개+)**: 여러 날에 걸쳐 분산

### 차단 방지

- 한 번에 너무 많이 수집하지 않기
- 배치 수집 시 5-10초 간격 유지
- 하루 100개 이하 권장

### 데이터 관리

- 정기적으로 `places/` 폴더 백업
- 중복 수집 방지를 위해 기존 파일 확인
- 필요한 데이터만 수집

## 🎯 고급 기능

### API 직접 사용

```javascript
// GET 요청
fetch('http://localhost:3000/scrape/1768171911')
  .then(res => res.json())
  .then(data => console.log(data));
```

### Python에서 사용

```python
import requests

response = requests.get('http://localhost:3000/scrape/1768171911')
data = response.json()
print(data)
```

## 📞 문제가 있나요?

1. 터미널에서 에러 메시지 확인
2. 브라우저 개발자 도구 (F12) 확인
3. [README.md](./README.md) 참고

## 🔧 서버 종료

터미널에서 **Ctrl + C** 를 누르면 서버가 안전하게 종료됩니다.

```
🔚 서버 종료 중...
✅ 브라우저 종료
```
